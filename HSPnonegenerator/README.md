モジュール変数の使用はしていますが、newlabを使用していない実装です。HSP3Dishでも動作します。